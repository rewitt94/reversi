{"dependencies":[{"name":"/Users/ricky/Documents/nodeplay/reversi2/package.json","includedInParent":true,"mtime":1520068098228},{"name":"./board.js","loc":{"line":1,"column":22}},{"name":"./cell.js","loc":{"line":2,"column":21}},{"name":"./scoreboard.js","loc":{"line":3,"column":27}},{"name":"./gamemode.js","loc":{"line":4,"column":25}}],"generated":{"js":"\"use strict\";var e=require(\"./board.js\"),t=require(\"./cell.js\"),i=require(\"./scoreboard.js\"),n=require(\"./gamemode.js\"),l=new e.Board(t.Cell),o=new i.Scoreboard,a=new n.GameMode;function r(){l.grid[3][3].setWhite(),l.grid[4][4].setWhite(),l.grid[3][4].setBlack(),l.grid[4][3].setBlack()}function c(){document.getElementById(\"black_score\").innerHTML=o.blackScore,document.getElementById(\"white_score\").innerHTML=o.whiteScore}function d(e){for(var t=[\"up\",\"upRight\",\"right\",\"downRight\",\"down\",\"downLeft\",\"left\",\"upLeft\"],i=[],n=0;n<8;n++){var a=!1,r=!0,c=0;l.traverse(e,t[n],function(e){r&&!a&&(e.getColor()==o.otherColor?c++:e.getColor()==o.playingColor&&c>0?a=!0:r=!1)}),a||(c=0),i.push(c)}return i}function s(e){var t=d(e),i=l.getCell(e);return t.some(function(e){return e>0})&&i.isClear()}function y(){}function u(e){var t=l.getCell(e.toString());t.setOpaque(),o.blackTurn?t.setBlack():t.setWhite();for(var i=[\"up\",\"upRight\",\"right\",\"downRight\",\"down\",\"downLeft\",\"left\",\"upLeft\"],n=d(e),a=0;a<8;a++){var r=0;l.traverse(e,i[a],function(e){r<n[a]&&(o.blackTurn?e.flip(\"black\"):e.flip(\"white\"),o.transferScore()),r++})}o.addScore(),o.changePlayer(),c(),t.invalidate()}r(),window.chooseGameMode=function(e){switch(e){case\"split_screen\":a.playSplitScreen();break;case\"multiplayer\":a.playMultiplayer(),document.getElementById(\"lobby_options_div\").style.visibility=\"visible\";break;case\"computer_opponent\":a.playComputerOpponent(),document.getElementById(\"player_color_div\").style.visibility=\"visible\"}document.getElementById(\"game_mode_div\").style.visibility=\"hidden\"},window.chooseColor=function(e){switch(e){case\"black\":a.playAsBlack();break;case\"white\":a.playAsWhite()}document.getElementById(\"player_color_div\").style.visibility=\"hidden\"},window.showMove=function(e){if(s(e)){var t=l.getCell(e);o.blackTurn?t.setBlack():t.setWhite(),t.setTransparent(),t.validate()}},window.hideMove=function(e){var t=l.getCell(e);t.validation&&(t.setOpaque(),t.removeColor(),t.invalidate())},window.playMove=function(e){l.getCell(e).validation&&(a.splitScreen?u(e):a.multiplayer?(a.playingBlack&&o.blackTurn||!a.playingBlack&&!o.blackTurn)&&v.send(\"play_move,\"+b+\",\"+e):a.computerOpponent&&(a.playingBlack&&o.blackTurn||!a.playingBlack&&!o.blackTurn)&&(u(e),y()))};var v=new WebSocket(\"ws://ricky.hewitt.tech:80/reversiws\");v.onopen=function(){console.log(\"websocket is connected...\")};var p=!1,m=!0,b=\"\";window.createMatch=function(){document.getElementById(\"lobby_options_div\").style.visibility=\"hidden\",document.getElementById(\"post_match_div\").style.visibility=\"visible\"},window.postMatch=function(e){if(!p){var t=\"post,\"+Math.random().toString()+\",\"+e;v.send(t),p=!0}},window.searchMatches=function(){v.send(\"search\"),document.getElementById(\"lobby_options_div\").style.visibility=\"hidden\",document.getElementById(\"lobby_div\").style.visibility=\"visible\"},v.onmessage=function(e){if(e=e.data.split(\",\"),console.log(e),\"lobby\"==e[0]){var t=document.getElementById(\"lobby_div\");if(\"no_games\"==e[1]){var i=document.createElement(\"H1\");i.innerHTML=\"No games available\",t.appendChild(i)}else for(var n=function(){o=document.createElement(\"button\");var i=e[3*l+1];o.addEventListener(\"click\",function(){v.send(\"accept,\"+i)}),o.innerHTML=e[3*l+2],t.appendChild(o)},l=0;l<e.length/3;l++){var o;n()}}\"start_game_as_black\"==e[0]&&(a.playAsBlack(),b=e[1],m=!0,p=!1,document.getElementById(\"lobby_div\").style.visibility=\"hidden\",document.getElementById(\"post_match_div\").style.visibility=\"hidden\",alert(\"you will play as black\")),\"start_game_as_white\"==e[0]&&(a.playAsWhite(),b=e[1],m=!0,p=!1,document.getElementById(\"lobby_div\").style.visibility=\"hidden\",document.getElementById(\"post_match_div\").style.visibility=\"hidden\",alert(\"you will play as white\")),\"make_move\"==e[0]&&u(e[1]),\"other_player_missing\"==e[0]&&(alert(\"connection failed\"),location.reload())};"},"hash":"79fa0a8426793270f2b6a7f1077b74d7","cacheData":{"env":{}}}