{"version":3,"sources":["../script/board.js","../script/cell.js","../script/scoreboard.js","../script/gamemode.js","../script/game.js"],"names":["BOARD_TEMPLATE","SplitScreenController","board","idString","console","log","Board","element","CellClass","controller","Controller","innerHTML","grid","x","column","y","String","fromCharCode","push","cellElement","document","getElementById","parentNode","addEventListener","showMove","hideMove","playMove","charCodeAt","direction","callback","coordinates","getCoordinate","Cell","validation","cell","style","opacity","playingColor","width","left","decreaseWidth","parseInt","setTimeout","background","increaseWidth","Scoreboard","blackTurn","otherColor","blackScore","whiteScore","addScore","subtractScore","updateScoresToHTML","SCOREBOARD","GameMode","splitScreen","multiplayer","computerOpponent","playingBlack","ai","BOARD","GAMEMODE","setWhite","setBlack","window","chooseGameMode","gameMode","playSplitScreen","playMultiplayer","visibility","playComputerOpponent","chooseColor","color","playAsBlack","playAsWhite","checkMove","directions","directionsCount","i","moveFound","movePossible","count","traverse","getColor","validateMove","getCell","some","isClear","setTransparent","validate","setOpaque","removeColor","invalidate","makeMove","ws","send","matchId","runAi","toString","flip","transferScore","changePlayer","WEBSOCKET_PATH","WebSocket","onopen","matchPosted","matchFound","createMatch","postMatch","matchName","Math","random","string","searchMatches","handleWebsocketMessage","message","data","split","lobby","noGames","createElement","appendChild","postedGame","id","length","alert","location","reload","onmessage"],"mappings":"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","file":"373e3893e77d85624afd7cb389ecc5bd.map","sourcesContent":["const BOARD_TEMPLATE = `\n  <div id=\"A\">\n    <div><div id=\"A1\"></div></div>\n    <div><div id=\"A2\"></div></div>\n    <div><div id=\"A3\"></div></div>\n    <div><div id=\"A4\"></div></div>\n    <div><div id=\"A5\"></div></div>\n    <div><div id=\"A6\"></div></div>\n    <div><div id=\"A7\"></div></div>\n    <div><div id=\"A8\"></div></div>\n  </div>\n  <div id=\"B\">\n    <div><div id=\"B1\"></div></div>\n    <div><div id=\"B2\"></div></div>\n    <div><div id=\"B3\"></div></div>\n    <div><div id=\"B4\"></div></div>\n    <div><div id=\"B5\"></div></div>\n    <div><div id=\"B6\"></div></div>\n    <div><div id=\"B7\"></div></div>\n    <div><div id=\"B8\"></div></div>\n  </div>\n  <div id=\"C\">\n    <div><div id=\"C1\"></div></div>\n    <div><div id=\"C2\"></div></div>\n    <div><div id=\"C3\"></div></div>\n    <div><div id=\"C4\"></div></div>\n    <div><div id=\"C5\"></div></div>\n    <div><div id=\"C6\"></div></div>\n    <div><div id=\"C7\"></div></div>\n    <div><div id=\"C8\"></div></div>\n  </div>\n  <div id=\"D\">\n    <div><div id=\"D1\"></div></div>\n    <div><div id=\"D2\"></div></div>\n    <div><div id=\"D3\"></div></div>\n    <div><div id=\"D4\"></div></div>\n    <div><div id=\"D5\"></div></div>\n    <div><div id=\"D6\"></div></div>\n    <div><div id=\"D7\"></div></div>\n    <div><div id=\"D8\"></div></div>\n  </div>\n  <div id=\"E\">\n    <div><div id=\"E1\"></div></div>\n    <div><div id=\"E2\"></div></div>\n    <div><div id=\"E3\"></div></div>\n    <div><div id=\"E4\"></div></div>\n    <div><div id=\"E5\"></div></div>\n    <div><div id=\"E6\"></div></div>\n    <div><div id=\"E7\"></div></div>\n    <div><div id=\"E8\"></div></div>\n  </div>\n  <div id=\"F\">\n    <div><div id=\"F1\"></div></div>\n    <div><div id=\"F2\"></div></div>\n    <div><div id=\"F3\"></div></div>\n    <div><div id=\"F4\"></div></div>\n    <div><div id=\"F5\"></div></div>\n    <div><div id=\"F6\"></div></div>\n    <div><div id=\"F7\"></div></div>\n    <div><div id=\"F8\"></div></div>\n  </div>\n  <div id=\"G\">\n    <div><div id=\"G1\"></div></div>\n    <div><div id=\"G2\"></div></div>\n    <div><div id=\"G3\"></div></div>\n    <div><div id=\"G4\"></div></div>\n    <div><div id=\"G5\"></div></div>\n    <div><div id=\"G6\"></div></div>\n    <div><div id=\"G7\"></div></div>\n    <div><div id=\"G8\"></div></div>\n  </div>\n  <div id=\"H\">\n    <div><div id=\"H1\"></div></div>\n    <div><div id=\"H2\"></div></div>\n    <div><div id=\"H3\"></div></div>\n    <div><div id=\"H4\"></div></div>\n    <div><div id=\"H5\"></div></div>\n    <div><div id=\"H6\"></div></div>\n    <div><div id=\"H7\"></div></div>\n    <div><div id=\"H8\"></div></div>\n  </div>\n`;\n\nexport class SplitScreenController {\n\n  playMove(board, idString) {\n    console.log(\"playMove\", board, idString);\n  }\n\n  showMove(board, idString) {\n    console.log(\"showMove\", board, idString)\n  }\n\n  hideMove(board, idString) {\n    console.log(\"hideMove\", board, idString)\n  }\n\n}\n\nexport class Board {\n\n  constructor(element, CellClass, controller=new Controller()) {\n    element.innerHTML = BOARD_TEMPLATE;\n\n    /*\n     * Setup phase\n     */\n    this.grid = []\n    for(let x=0;x<8;x++) {\n      const column = [];\n      for(let y=0;y<8;y++) {\n        let idString = String.fromCharCode(65+x,49+y);\n        column.push(new CellClass(idString));\n\n        let cellElement = document.getElementById(idString).parentNode;\n\n        cellElement.addEventListener(\n          \"mouseover\",\n          () => controller.showMove(this, idString)\n        );\n\n        cellElement.addEventListener(\n          \"mouseleave\",\n          () => controller.hideMove(this, idString)\n        );\n\n        cellElement.addEventListener(\n          \"click\",\n          () => controller.playMove(this, idString)\n        );\n      }\n      this.grid.push(column);\n    }\n  }\n\n  getCell(idString) {\n    var x = idString.charCodeAt(0) - 65;\n    var y = idString.charCodeAt(1) - 49;\n    return this.grid[x][y]\n  }\n\n  getCoordinate(idString) {\n    var x = idString.charCodeAt(0) - 65;\n    var y = idString.charCodeAt(1) - 49;\n    return [x,y];\n  }\n\n  traverse(idString,direction,callback) {\n    var coordinates = this.getCoordinate(idString);\n    var x = coordinates[0]\n    var y = coordinates[1]\n    switch (direction) {\n      case 'up':\n        while (y < 7) {\n          y++;\n          callback(this.grid[x][y]);\n        }\n        break;\n      case 'upRight':\n        while (y < 7 && x < 7) {\n          y++;\n          x++;\n          callback(this.grid[x][y]);\n        }\n        break;\n      case 'right':\n        while (x < 7) {\n          x++;\n          callback(this.grid[x][y])\n        }\n        break;\n      case 'downRight':\n        while (x < 7 && y > 0) {\n          x++;\n          y--;\n          callback(this.grid[x][y])\n        }\n        break;\n      case 'down':\n        while (y > 0) {\n          y--;\n          callback(this.grid[x][y])\n        }\n        break;\n      case 'downLeft':\n        while (y > 0 && x > 0) {\n          x--;\n          y--;\n          callback(this.grid[x][y])\n        }\n        break;\n      case 'left':\n        while (x > 0) {\n          x--;\n          callback(this.grid[x][y])\n        }\n        break;\n      case 'upLeft':\n        while (y < 7 && x > 0) {\n          x--;\n          y++;\n          callback(this.grid[x][y])\n        }\n        break;\n    }\n  }\n}\n","export class Cell {\n\n  constructor(idString) {\n    this.idString = idString;\n    this.validation = false;\n  }\n\n  setBlack() {\n    var cell = document.getElementById(this.idString);\n    cell.style['background-color'] = 'black';\n  }\n\n  setWhite() {\n    var cell = document.getElementById(this.idString);\n    cell.style['background-color'] = 'white';\n  }\n\n  setTransparent() {\n    var cell = document.getElementById(this.idString);\n    cell.style.opacity = 0.65;\n  }\n\n  setOpaque() {\n    var cell = document.getElementById(this.idString);\n    cell.style.opacity = 1;\n  }\n\n  removeColor() {\n    var cell = document.getElementById(this.idString);\n    cell.style['background-color'] = '';\n  }\n\n  isClear() {\n    var cell = document.getElementById(this.idString);\n    return cell.style['background-color'] == '' ?  true : false;\n  }\n\n  getColor() {\n    var cell = document.getElementById(this.idString);\n    return cell.style['background-color'];\n  }\n\n  getOpacity() {\n    var cell = document.getElementById(this.idString);\n    return cell.style.opacity;\n  }\n\n  validate() {\n    this.validation = true;\n  }\n\n  invalidate() {\n    this.validation = false;\n  }\n\n  flip(playingColor) {\n    var cell = document.getElementById(this.idString);\n    cell.style.width = '60px';\n    cell.style.left = '10%';\n    console.log('oi')\n    this.decreaseWidth(cell, playingColor);\n  }\n\n  decreaseWidth(cell, playingColor) {\n    if (parseInt(cell.style.width) > 2) {\n      cell.style.width = parseInt(cell.style.width) - 2 + 'px';\n      cell.style.left = parseInt(cell.style.left) + 1 + 'px';\n      setTimeout(() => this.decreaseWidth(cell, playingColor), 1);\n    } else {\n      cell.style.background = playingColor;\n      this.increaseWidth(cell, playingColor);\n    }\n  }\n\n  increaseWidth(cell, playingColor) {\n    if (parseInt(cell.style.width) < 60) {\n      cell.style.width = parseInt(cell.style.width) + 2 + 'px';\n      cell.style.left = parseInt(cell.style.left) - 1 + 'px';\n      setTimeout(() => this.increaseWidth(cell, playingColor), 1);\n    }\n  }\n}\n","export class Scoreboard {\n\n  constructor() {\n    this.blackTurn = true;\n    this.playingColor = 'black';\n    this.otherColor = 'white';\n    this.blackScore = 2;\n    this.whiteScore = 2;\n  }\n\n  changePlayer() {\n    this.blackTurn = !this.blackTurn;\n    this.blackTurn ? this.playingColor = 'black' : this.playingColor = 'white';\n    this.blackTurn ? this.otherColor = 'white' : this.otherColor = 'black';\n  }\n\n  transferScore () {\n    this.addScore();\n    this.subtractScore();\n  }\n\n  addScore() {\n    this.blackTurn ? this.blackScore++ : this.whiteScore++;\n    this.updateScoresToHTML();\n  }\n\n  subtractScore() {\n    this.blackTurn ? this.whiteScore-- : this.blackScore--;\n    this.updateScoresToHTML();\n  }\n\n  updateScoresToHTML() {\n    document.getElementById('black_score').innerHTML = SCOREBOARD.blackScore;\n    document.getElementById('white_score').innerHTML = SCOREBOARD.whiteScore;\n  }\n\n}\n","export class GameMode {\n\n  constructor() {\n    this.splitScreen = false;\n    this.multiplayer = false;\n    this.computerOpponent = false;\n    this.playingBlack = false;\n  }\n\n  playSplitScreen() {\n    this.splitScreen = true;\n  }\n\n  playMultiplayer() {\n    this.multiplayer = true;\n  }\n\n  playComputerOpponent() {\n    this.ai = true\n  }\n\n  playAsBlack() {\n    this.playingBlack = true;\n  }\n\n  playAsWhite() {\n    this.playingBlack = false;\n  }\n\n}\n\n//this might be irrelavant\n","import { Board } from './board.js'\nimport { Cell } from './cell.js'\nimport { Scoreboard } from './scoreboard.js'\nimport { GameMode } from './gamemode.js'\n\nconst BOARD = new Board(document.getElementById('reversi_board'), Cell)\nconst SCOREBOARD = new Scoreboard\nconst GAMEMODE = new GameMode\n\nBOARD.grid[3][3].setWhite()\nBOARD.grid[4][4].setWhite()\nBOARD.grid[3][4].setBlack()\nBOARD.grid[4][3].setBlack()\n\n\nwindow.chooseGameMode = function(gameMode) {\n  switch (gameMode) {\n    case 'split_screen':\n        GAMEMODE.playSplitScreen();\n      break;\n    case 'multiplayer':\n      GAMEMODE.playMultiplayer();\n      document.getElementById('lobby_options_div').style.visibility = 'visible';\n      break;\n    case 'computer_opponent':\n      GAMEMODE.playComputerOpponent();\n      document.getElementById('player_color_div').style.visibility = 'visible';\n      break;\n  }\n  document.getElementById('game_mode_div').style.visibility = 'hidden';\n}\n\nwindow.chooseColor = function(color) {\n  switch (color) {\n    case 'black':\n      GAMEMODE.playAsBlack();\n      break;\n    case 'white':\n      GAMEMODE.playAsWhite();\n      break;\n  }\n  document.getElementById('player_color_div').style.visibility = 'hidden';\n}\n\nfunction checkMove(idString) {\n  var directions = ['up','upRight','right','downRight','down','downLeft','left','upLeft']\n  var directionsCount = []\n  for (var i=0;i<8;i++) {\n    var moveFound = false;\n    var movePossible = true;\n    var count = 0;\n    BOARD.traverse(idString,directions[i],(cell) => {\n      if (movePossible && !moveFound) {\n        if (cell.getColor() == SCOREBOARD.otherColor) {\n          count++;\n        } else if (cell.getColor() == SCOREBOARD.playingColor && count > 0) {\n          moveFound = true;\n        } else {\n          movePossible = false\n        }\n      }\n    })\n    if (!moveFound) { count = 0 }\n    directionsCount.push(count)\n  }\n  return directionsCount\n}\n\nfunction validateMove(idString) {\n  var directionsCount = checkMove(idString);\n  var cell = BOARD.getCell(idString);\n  return (directionsCount.some((x) => x > 0) && cell.isClear())\n}\n\nwindow.showMove = function(idString) {\n  if (validateMove(idString)) {\n    var cell = BOARD.getCell(idString);\n    if (SCOREBOARD.blackTurn) {\n      cell.setBlack();\n    } else {\n      cell.setWhite();\n    }\n    cell.setTransparent();\n    cell.validate();\n  }\n}\n\nwindow.hideMove = function(idString) {\n  var cell = BOARD.getCell(idString);\n  if (cell.validation) {\n    cell.setOpaque();\n    cell.removeColor();\n    cell.invalidate();\n  }\n}\n\nwindow.playMove = function(idString) {\n  var cell = BOARD.getCell(idString);\n  if (cell.validation) {\n    if (GAMEMODE.splitScreen) {\n      makeMove(idString)\n    } else if (GAMEMODE.multiplayer) {\n      if (GAMEMODE.playingBlack && SCOREBOARD.blackTurn || !GAMEMODE.playingBlack && !SCOREBOARD.blackTurn) {\n        ws.send('play_move,' + matchId + ',' + idString)\n      }\n    } else if (GAMEMODE.computerOpponent) {\n      if (GAMEMODE.playingBlack && SCOREBOARD.blackTurn || !GAMEMODE.playingBlack && !SCOREBOARD.blackTurn) {\n      makeMove(idString)\n      runAi()\n      }\n    }\n  }\n}\n\nfunction runAi() {\n\n}\n\nfunction makeMove(idString) {\n  var cell = BOARD.getCell(idString.toString());\n  cell.setOpaque();\n  if (SCOREBOARD.blackTurn) {\n    cell.setBlack();\n  } else {\n    cell.setWhite();\n  }\n  var directions = ['up','upRight','right','downRight','down','downLeft','left','upLeft']\n  var directionsCount = checkMove(idString);\n  for (var i=0;i<8;i++) {\n    var count = 0;\n    BOARD.traverse(idString,directions[i],(cell) => {\n      if (count < directionsCount[i]) {\n        if (SCOREBOARD.blackTurn) {\n          cell.flip('black');\n        } else {\n          cell.flip('white');\n        }\n        SCOREBOARD.transferScore()\n      }\n      count++;\n    })\n  }\n  SCOREBOARD.addScore();\n  SCOREBOARD.changePlayer();\n  updateScoresToHTML();\n  cell.invalidate();\n}\n\n// NODE_ENV is set by parcel\n// console.log(\"node env is\", process.env.NODE_ENV);\n\n// 1 == \"1\" is true,\n// but 1 === \"1\" is false\n//\n// generally using === is \"safer\"\n\nconst WEBSOCKET_PATH = process.env.NODE_ENV === \"production\" ?\n  'ws://ricky.hewitt.tech:80/reversiws' :\n  'ws://localhost:5000';\n\nvar ws = new WebSocket(WEBSOCKET_PATH);\n\n// event emmited when connected\nws.onopen = function() {\n  console.log('websocket is connected...');\n\n  // sending a send event to websocket server\n}\n\n// This needs serious refactoring\n\nvar matchPosted = false;\nvar matchFound = true;\nvar matchId = '';\n\nwindow.createMatch = function() {\n  document.getElementById('lobby_options_div').style.visibility = 'hidden';\n  document.getElementById('post_match_div').style.visibility = 'visible';\n}\n\nwindow.postMatch = function(matchName) {\n  if (!matchPosted) {\n    var matchId = Math.random() ;\n    // websockets only support strings currently\n    var string = 'post,' + matchId.toString() + ',' + matchName;\n    ws.send(string);\n\n    // const message = {\n    //   type: 'post',\n    //   matchId: matchId,\n    //   matchName: matchName\n    // };\n    // ws.send(JSON.stringify(message))\n    //\n    // on the server - JSON.parse(message) will get the original object back\n\n\n    matchPosted = true;\n  }\n}\n\nwindow.searchMatches = function() {\n  ws.send('search');\n  document.getElementById('lobby_options_div').style.visibility = 'hidden';\n  document.getElementById('lobby_div').style.visibility = 'visible';\n}\n\n// event emitted when recieving message\nfunction handleWebsocketMessage (message) {\n  message = message.data.split(',');\n  console.log(message)\n  if (message[0] == 'lobby') {\n    var lobby = document.getElementById('lobby_div');\n    if (message[1] == 'no_games') {\n      var noGames = document.createElement('H1');\n      noGames.innerHTML = 'No games available';\n      lobby.appendChild(noGames);\n    } else {\n      for(var i = 0;i < message.length / 3;i++) {\n        var postedGame = document.createElement('button');\n        const id = message[(3*i) + 1];\n        postedGame.addEventListener('click', function() {\n          ws.send('accept,' + id)\n        });\n        postedGame.innerHTML = message[(3*i) + 2];\n        lobby.appendChild(postedGame);\n      }\n    }\n  };\n\n  if (message[0] == 'start_game_as_black') {\n    GAMEMODE.playAsBlack();\n    matchId = message[1];\n    matchFound = true;\n    matchPosted = false;\n    document.getElementById('lobby_div').style.visibility = 'hidden';\n    document.getElementById('post_match_div').style.visibility = 'hidden';\n    alert('you will play as black');\n  }\n\n  if (message[0] == 'start_game_as_white') {\n    GAMEMODE.playAsWhite();\n    matchId = message[1];\n    matchFound = true;\n    matchPosted = false;\n    document.getElementById('lobby_div').style.visibility = 'hidden';\n    document.getElementById('post_match_div').style.visibility = 'hidden';\n    alert('you will play as white');\n  }\n\n  if (message[0] == 'make_move') {\n    makeMove(message[1]);\n  }\n\n  if (message[0] == 'other_player_missing') {\n    alert('connection failed')\n    location.reload();\n  }\n\n}\n\nws.onmessage = (message) => handleWebsocketMessage(message);\n\n// if handleWebsocketMessage is in a class use this, e.g.:\n// ws.onmessage = (message) => this.handleWebsocketMessage(message);\n"]}